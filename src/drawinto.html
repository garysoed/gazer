<base href="..">

<link rel="import" href="bower_components/protoboard/out/ability/ability.html">
<link rel="import" href="bower_components/protoboard/out/third_party/jquery.html">
<link rel="import" href="bower_components/protoboard/out/trigger/click.html">

<link rel="import" href="src/dijs.html">

<script type="text/javascript">
DIJS
    .prefix('gz')
    .bind('DrawInto', function(require) {

  var $ = require('/$');
  var Ability = require('/pb.ability.Ability');
  var Click = require('/pb.trigger.Click');

  var DrawInto = function(toEl) {
    Ability.call(this, 'drawinto', new Click());
    this.toEl = toEl;
  };

  DrawInto.prototype = Object.create(Ability.prototype);

  DrawInto.prototype.doTrigger = function(el) {
    for (var i = 0; i < 4 && el.childElementCount > 0; i++) {
      var child = el.lastElementChild;
      this.toEl.appendChild(child);

      // Make the drawn card show its front side.
      $(child).attr('flip-active', true);
    }
  };

  DrawInto.prototype.isEnabled = function() { return true; };

  return DrawInto;
});
</script>
