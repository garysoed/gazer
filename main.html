<!DOCTYPE html>
<html>
  <base href=".">
  <head>
    <link rel="import" href="bower_components/protoboard/out/bootstrap.html">
    <link rel="import" href="bower_components/protoboard/out/component/card.html">
    <link rel="import" href="bower_components/protoboard/out/region/deck.html">
    <link rel="import" href="bower_components/protoboard/out/region/hand.html">
    <link rel="import" href="bower_components/protoboard/out/region/rect.html">
    <link rel="import" href="bower_components/protoboard/out/service/acl.html">
    <link rel="import" href="bower_components/protoboard/out/service/state.html">
    <link rel="import" href="bower_components/protoboard/out/third_party/chance.html">
    <link rel="import" href="bower_components/protoboard/out/third_party/di.html">
    <link rel="import" href="bower_components/protoboard/out/ui/preview.html">
    <link rel="import" href="bower_components/protoboard/out/ui/previewer.html">
    <link rel="import" href="bower_components/protoboard/out/ui/generate.html">

    <link rel="stylesheet" href="out/gazer.css">

    <link rel="import" href="src/setup.html">
  </head>
  <body>
    <pb-state currentPlayer="player1"></pb-state>
    <section id="top-section">
      <section id="active-area">
        <section id="draft">
          <section id="rift">
            <pb-r-deck id="riftdeck">
              <pb-u-generate input="riftCards">
                <template>
                  {{#each riftCards}}
                    {{> gz-card showfront='false'}}
                  {{/each}}
                </template>
              </pb-u-generate>
            </pb-r-deck>

            <section id="riftchoice">
              <pb-r-deck shuffle="false"></pb-r-deck>
              <pb-r-deck shuffle="false"></pb-r-deck>
              <pb-r-deck shuffle="false"></pb-r-deck>
              <pb-r-deck shuffle="false"></pb-r-deck>
            </section>
          </section>

          <section id="environment">
            <section id="staples">
              <pb-u-generate input="stapleCards">
                <template>
                  {{#each stapleCards}}
                    <pb-r-deck shuffles="false">
                      {{> gz-card showfront='true'}}
                    </pb-r-deck>
                  {{/each}}
                </template>
              </pb-u-generate>
            </section>
            <pb-r-deck id="riftdiscard"></pb-r-deck>
          </section>
        </section>

        <section id="playarea">
          <pb-r-rect></pb-r-rect>
        </section>
      </section>

      <section id="side">
        <pb-u-previewer></pb-u-previewer>
        <section>
          <ol>
            <li>Beginning of the turn</li>
            <li>Refresh &amp; Cleanup</li>
            <li>Plan</li>
            <li>Draft</li>
            <li>Play / Attack</li>
          </ol>
        </section>
        <button id="nextturn">Next Turn (Player 1)</button>
        <button id="log">Download Log</button>
      </section>
    </section>

    <section id="bottom-section" class="player1">
      <ul>
        <li class="player1">Player 1 <input type="number" value="40"></li>
        <li class="player2">Player 2 <input type="number" value="40"></li>
      </ul>
      <section id="switcher">
        <pb-u-generate input="players playerCards">
          <template>
            {{#each players}}
              <section class="playerarea" id="player{{this}}area" pb-acl-readable="player{{this}}">
                <section class="hand">
                  <pb-r-deck class="discard"></pb-r-deck>
                  <pb-r-deck class="deck" show-count="true" data-count="5">
                    {{#each ../playerCards}}
                      {{> gz-card showfront='false'}}
                    {{/each}}
                  </pb-r-deck>
                  <div class="decksize"></div>
                  <pb-r-hand></pb-r-hand>
                </section>
                <section class="buttons">
                  <button class="shuffle">Shuffle</button>
                  <button class="draw">Draw 4</button>
                </section>
              </section>
            {{/each}}
          </template>
        </pb-u-generate>
      </section>
    </section>

    <script>
      DI
          .prefix('pb')
          .run({
              Bootstrap: '=',
              Log: 'service.=',
              seed: '=',
              setup: '/gz.='
            },
            function($i) {
        $i.setup.preBootstrap();
        $i.Bootstrap.run(document);
        $i.setup.postBootstrap(document);
      });
    </script>
  </body>
</html>
